<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamPro | Live</title>

    <!-- CSS extern -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <nav class="navbar">
        <div class="logo">STREAM<span>PRO</span></div>
        <div class="search-bar">
            <input type="text" placeholder="Buscar directes o categories...">
        </div>
        <div class="user-actions">
            <button class="btn-login">Inicia sessi√≥</button>
        </div>
    </nav>

    <main class="main-layout">
        <aside class="sidebar">
            <h3>Canals seguits</h3>
         <div class="channel-item">
    <img class="avatar" src="https://preview.redd.it/new-copy-ability-drip-v0-f5viutmhh9qb1.jpg?width=640&crop=smart&auto=webp&s=155176213cb1e9a95d10b16cf1bcc8b058d3c10a" alt="Kirby_Fan">
    <div class="info"><span>Kirby_Fan</span><p>üî¥ 1.2k</p></div>
    </div>

    <div class="channel-item">
    <img class="avatar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTh7HT_p5c4A8nKqqwxmWBN1qbK7XfBFfhb4A&s" alt="TechGuru">
    <div class="info"><span>TechGuru</span><p>Offline</p></div>
    </div>

            <hr class="divider">
            <h3>Explorar</h3>
            <div class="channel-item"><span>üéÆ Gaming</span></div>
            <div class="channel-item"><span>üéµ M√∫sica</span></div>
        </aside>

        <section class="content-area">
            <div class="video-wrapper">
                <video id="player" autoplay playsinline controls muted></video>
                <div class="live-badge" id="liveBadge">EN DIRECTE</div>
            </div>
            
            <div class="stream-info">
                <div class="streamer-details">
                    <img src="https://preview.redd.it/new-copy-ability-drip-v0-f5viutmhh9qb1.jpg?width=640&crop=smart&auto=webp&s=155176213cb1e9a95d10b16cf1bcc8b058d3c10a" alt="Avatar" class="streamer-avatar">
                    <div class="stream-text">
                        <h2 id="display-stream-name">Hola?</h2>
                        <p class="stream-meta">Categoria: <strong>Informatica i Comunicacions</strong></p>
                        <p class="viewer-count">‚óè 1.254 espectadors</p>
                    </div>
                </div>
                <button class="btn-follow">Seguir</button>
            </div>
        </section>

        <aside class="chat-sidebar">
            <div class="chat-header">XAT DEL DIRECTE</div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message">
                    <span class="chat-user system">Sistema:</span> Benvinguts al xat!
                </div>
            </div>
            <div class="chat-input">
                <input type="text" placeholder="Envia un missatge..." id="userInput">
            </div>
        </aside>
    </main>

    <script src="webrtc.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const app = urlParams.get('app') || 'live';
        const stream = urlParams.get('stream') || 'mystream';
        const srsApiUrl = "https://practicadamaididi.ddns.net/rtc/v1/play/";

        document.getElementById('display-stream-name').textContent = `Directe: ${stream}`;

        if (typeof SrsRtcPlayer !== 'undefined') {
            SrsRtcPlayer.play(srsApiUrl, document.getElementById('player'), app, stream);
        }
         const video = document.getElementById("player");
    const liveBadge = document.getElementById("liveBadge");

            // Quan el v√≠deo rep dades reals
            video.addEventListener("playing", () => {
            liveBadge.classList.add("live");
});

            // Si el stream es para
        video.addEventListener("pause", () => {
        liveBadge.classList.remove("live");
});

        video.addEventListener("ended", () => {
        liveBadge.classList.remove("live");
});

        const messages = [
           { user: "Mario", text: "Aix√≤ ha estat espectacular." },
{ user: "Link", text: "Sembla una dungeon complicada." },
{ user: "Zelda", text: "Molt bona estrat√®gia ara mateix." },
{ user: "Kirby", text: "Aquest moviment ha estat top." },
{ user: "Luigi", text: "Gaireb√© cau." },
{ user: "Peach", text: "M‚Äôencanta aquest directe." },
{ user: "Samus", text: "Reflexos perfectes." },
{ user: "Kratos", text: "Aix√≤ ha estat brutal." },
{ user: "LaraCroft", text: "Gran jugada." },
{ user: "Sonic", text: "Ha anat molt r√†pid." },
{ user: "Shadow", text: "Molt net i professional." },
{ user: "MasterChief", text: "Objectiu completat." },
{ user: "Geralt", text: "Bona decisi√≥." },
{ user: "Ciri", text: "Aix√≤ ha estat √®pic." },
{ user: "Ezio", text: "Aquest boss ja √©s hist√≤ria." },
{ user: "Altair", text: "Moviment prec√≠s." },
{ user: "NathanDrake", text: "Sembla una escena de pel¬∑l√≠cula." },
{ user: "Crash", text: "No m‚Äôho esperava." },
{ user: "Spyro", text: "Molt intens." },
{ user: "Cloud", text: "Limit activat." },
{ user: "Sephiroth", text: "Interessant moviment." },
{ user: "Tifa", text: "Molt bona execuci√≥." },
{ user: "Ryu", text: "Gran combinaci√≥." },
{ user: "ChunLi", text: "Quina velocitat." },
{ user: "SubZero", text: "Fredament calculat." },
{ user: "Scorpion", text: "Aix√≤ ha estat contundent." },
{ user: "Steve", text: "Aix√≤ amb m√©s recursos seria millor." },
{ user: "Alex", text: "Gran construcci√≥ de jugada." },
{ user: "ArthurMorgan", text: "Aix√≠ √©s com es fa." },
{ user: "JohnMarston", text: "Molt net." },
{ user: "Ellie", text: "Moment molt tens." },
{ user: "Joel", text: "Ben jugat." },
{ user: "Aloy", text: "Bona t√†ctica contra aquest enemic." },
{ user: "Krystal", text: "Molt prec√≠s." },
{ user: "FoxMcCloud", text: "Aix√≤ ha estat arriscat." },
{ user: "Pikachu", text: "Gran atac." },
{ user: "Ash", text: "Aix√≤ √©s entrenament del bo." },
{ user: "LeonKennedy", text: "Situaci√≥ controlada." },
{ user: "ClaireRedfield", text: "Bona superviv√®ncia." },
{ user: "DoomSlayer", text: "Sense pietat." },
{ user: "MarcusFenix", text: "Impacte directe." },
{ user: "PrincessZelda", text: "Perfecte timing." },
{ user: "Bowser", text: "Gaireb√©." },
{ user: "Ganondorf", text: "Aix√≤ encara no ha acabat." },
{ user: "Yoshi", text: "Molt bon moviment." },
{ user: "DonkeyKong", text: "Aix√≤ ha estat potent." },
{ user: "MegaMan", text: "Nova habilitat desbloquejada." },
{ user: "PacMan", text: "Aix√≤ ha estat r√†pid." },
{ user: "Sans", text: "Interessant." },
{ user: "FreddyFazbear", text: "Millor vigilar." }
        ];

        const chatContainer = document.getElementById("chatMessages");

        function addMessage() {
            const msg = messages[Math.floor(Math.random() * messages.length)];
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("chat-message");
            messageDiv.innerHTML = `<span class="chat-user">${msg.user}:</span> ${msg.text}`;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            if (chatContainer.children.length > 50) {
                chatContainer.removeChild(chatContainer.firstChild);
            }
        }

        function scheduleNextMessage() {
            const randomTime = Math.random() * (7000 - 3000) + 3000;
            setTimeout(() => {
                addMessage();
                scheduleNextMessage();
            }, randomTime);
        }

        scheduleNextMessage();

        document.getElementById('userInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter' && this.value.trim() !== "") {
                const messageDiv = document.createElement("div");
                messageDiv.classList.add("chat-message");
                messageDiv.innerHTML = `<span class="chat-user you">Tu:</span> ${this.value}`;
                chatContainer.appendChild(messageDiv);
                this.value = "";
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        });
    </script>

</body>
</html>
